<div class= "formContainer">
  <%= form_for @strat_column do |f| %>
    <div class="generalInfoForm">
      <h3>Stratigraphic Column Information</h3>
      <div class="infoFormFields">
        <%= f.hidden_field :user_id, value: @id if @strat_column.new_record?%>   
      
        <div class = "form-group">
          <%= f.label :name %>
          <%= f.text_field :name, required: :true, class: "form-control" %>
        </div>
        
        <div class = "form-group">
          <%= f.label :location %>
          <%= f.text_field :location, class: "form-control" %>
        </div>
        
        <div class = "form-group">
          <%= f.label :lat, "Latitude" %>
          <%= f.text_field :lat, class: "form-control" %>
        </div>
        
        <div class = "form-group">
          <%= f.label :lng, "Longitude" %>
          <%= f.text_field :lng, class: "form-control" %>
        </div>
        
        <div class = "form-group">
          <%= f.label :description %>
          <%= f.text_area :description, class: "form-control" %>
        </div>
      </div>  
    </div>
    <!--Nested attributes-->
    <div id="layer-container">
      <%= f.fields_for :layers do |layer| %>
        <div class="layer layer-fields_<%= layer.options[:child_index] %>" data-index="<%= layer.options[:child_index] %>">
          
          <div class= "header">
            <h3 class="section-label section-label_<%= layer.options[:child_index] %>"> Layer Section </h3>
          </div>
          
          <div class="infoFormFields">
            <% if !@strat_column.new_record? && layer.options[:child_index] != 0%>
              <div class="checkbox">
                <%= layer.hidden_field :_destroy, class: 'delete_member', :id => layer %>   
              </div>
            <% end %>
            
            <div class = "form-group" data-fieldname="name">
            <%= layer.label :name %>
              <%= layer.text_field :name, required: :true, class: "form-control" %>
            </div>
            
            <div class = "form-group" data-fieldname="formation">
            <%= layer.label :formation %>
              <%= layer.text_field :formation, class: "form-control" %>
            </div>
            
            <div class = "form-group" data-fieldname="timescale_id">
              <%= layer.label :timescale_id,"Geologic Period" %>
              <%= layer.collection_select(:timescale_id, @timescale_collection.order(:early_age), :id, :interval_name, {include_blank: "Select Geologic Period"}, {required: true, class: "form-control"})%>    
            </div>
            
            <div class = "form-group" data-fieldname="epoch_age">
            <%= layer.label :epoch_age, "Specify Epoch and/or Age" %>
              <%= layer.text_field :epoch_age, class: "form-control" %>
            </div>
          
            <div class = "form-group" data-fieldname="lithology_id">
              <%= layer.label :lithology_id %> <span class="tooltips glyphicon glyphicon-question-sign"><span>See: FGDC Lithologic Patterns</span></span>
              <%= layer.collection_select(:lithology_id, Lithology.order(:url), :id, :name_with_texture_num, {include_blank: "Select Lithology"}, {required: true, class: "form-control"})%>    
            </div> 
            
            <div class = "form-group" data-fieldname="contact_id">
              <%= layer.label :contact_id,"Contact Type (Upper Boundary)" %>
              <%= layer.collection_select(:contact_id, Contact.order(:name), :id, :name, {include_blank: "Select Contact Type"}, {required: true, class: "form-control"})%>    
            </div>      
            
            <div class = "form-group" data-fieldname="thickness">
            <%= layer.label :thickness %>
              <%= layer.text_field :thickness, required: :true, placeholder: "Must be in meters", class: "form-control" %>
            </div>
            
            <div class = "form-group" data-fieldname="description">
            <%= layer.label :description %>
              <%= layer.text_area :description, class: "form-control" %>
            </div>
          </div> <!--infoFormFields-->
          
        </div>
      <% end %> 
    </div> <!-- layer_section div end -->
    
    <div class = "form-group footer">
      <%= f.submit "Submit", class: "btn btn-default" %>
      <span class = "btn btn-xs btn-default add_btn"><i class='glyphicon glyphicon-plus'></i> Add a new layer </span>
    </div>
    
  <% end %>
</div>